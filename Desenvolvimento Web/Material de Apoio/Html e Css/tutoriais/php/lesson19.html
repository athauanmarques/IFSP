
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt-br">
<head>

	<title>Lição 19: Inserindo dados em um Banco de Dados - HTML.net</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="title" content="Lição 19: Inserindo dados em um Banco de Dados - HTML.net" />
	<meta name="description" content="Lição 19: Inserindo dados em um Banco de Dados - Tutoriais HTML e CSS - Construa seu website" />
	<meta name="keywords" content="HTML, CSS, XHTML, HTML Tutorial, CSS Tutorial, Fóruns, , " />
	<meta name="language" content="pt-br" />
	<meta name="robots" content="index, follow" />
	<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.classify.org/safesurf/" l gen true for "http://html.net/" r (SS~~000 1))' />
	<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true for "http://html.net" r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true for "http://html.net" r (n 0 s 0 v 0 l 0))' /> 
	<meta property="og:title" content="Lição 19: Inserindo dados em um Banco de Dados - HTML.net" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="http://pt-br.html.net/tutorials/php/lesson19.php" />
	<meta property="og:image" content="http://html.net/avatar.png" />
	<meta property="og:site_name" content="HTML.net" />
	<meta property="fb:admins" content="610699221" />
	<link rel='stylesheet' href='http://html.net/site/style/default.screen.css' type='text/css' media='screen' /><link rel='stylesheet' href='http://html.net/site/style/default.print.css' type='text/css' media='print' />
	<script type="text/javascript">
			
		function toggleVisibility(objectID, imageID) {
		vis = document.getElementById(objectID).style;
		state = vis.display;
		if (state == 'none') {
			vis.display = 'block';	
			document.getElementById(imageID).value = '▲ Contrair visualização';
			}
		else {		
			if (state == 'block') {
				vis.display = 'none';
				document.getElementById(imageID).value = '▼ Expandir visualização';
				}	
			else {
				vis.display = 'block'; 
				document.getElementById(imageID).value = '▲ Contrair visualização';
				}
		}}

		//-->
	</script>

	<script type="text/javascript">
	// <![CDATA[
		var jump_page = '{LA_JUMP_PAGE}:';
		var on_page = '{ON_PAGE}';
		var per_page = '{PER_PAGE}';
		var base_url = '{A_BASE_URL}';
		var style_cookie = 'phpBBstyle';
		var style_cookie_settings = '{A_COOKIE_SETTINGS}';
		var onload_functions = new Array();
		var onunload_functions = new Array();

		/**
		* Find a member
		*/
		function find_username(url)
		{
			popup(url, 760, 570, '_usersearch');
			return false;
		}

		/**
		* New function for handling multiple calls to window.onload and window.unload by pentapenguin
		*/
		window.onload = function()
		{
			for (var i = 0; i < onload_functions.length; i++)
			{
				eval(onload_functions[i]);
			}
		}

		window.onunload = function()
		{
			for (var i = 0; i < onunload_functions.length; i++)
			{
				eval(onunload_functions[i]);
			}
		}

	// ]]>
	</script>

	<script type="text/javascript" src="http://html.net/forums/styles/prosilver/template/forum_fn.js"></script>

	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-6716118-1']);
	  _gaq.push(['_setDomainName', '.html.net']);
	  _gaq.push(['_trackPageview']);

	  (function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>

	
</head>

<body>	

	<div id="login">
		
		<div><a href='../..\forums\ucp.html'>Entrar</a> | <a href='../..\forums\ucp.html'>Registrar</a> | <a href='../..\forums\faq.html'>FAQ</a></div><img src='../..\site\graphics\user.png' />		
	</div>

	<div id="header">
			
		<ul>
			<li><a href='../..\index.html'>Início</a></li>
			<li class='selected'><a href='..\index.html'>Tutorials</a></li>
			<li><a href='../..\forums\index.html'>Fóruns</a></li>
			<li><a href='../..\about\index.html'>Sobre</a></li>
		</ul>
		<form method="get" action="../..\search\index.html" id="cse-search-box">
		<div id="searchbar">
			<span>
			
				<input type="text" name="q" id="query" value="" /><input type="submit" id="submit" value="Busca" />
				 <input type="hidden" name="cx" value="002160260272865772965:d4fb4jd-jh0" />
				<input type="hidden" name="cof" value="FORID:11;NB:1" />
				<input type="hidden" name="ie" value="UTF-8" />	
				<input type="hidden" name="lr" value="lang_pt-br" />	
				<input type="hidden" name="hl" value="pt-br" />	
			
			</span>
		</div>
		</form>
		
		<div id="ad_leaderboard">
	<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'>
	</script>
	<script type='text/javascript'>
	GS_googleAddAdSenseService("ca-pub-0941946313210493");
	GS_googleEnableAllServices();
	</script>
	<script type='text/javascript'>
	GA_googleAddSlot("ca-pub-0941946313210493", "HTML_NET_pt-br_tutorials_Leaderboard_728x90");
	</script>
	<script type='text/javascript'>
	GA_googleFetchAds();
	</script>

	<!-- ca-pub-0941946313210493/HTML_NET_pt-br_tutorials_Leaderboard_728x90 -->
	<script type='text/javascript'>
	GA_googleFillSlot("HTML_NET_pt-br_tutorials_Leaderboard_728x90");
	</script>
</div>

	</div>

	
		<div id="main">
		<div id="content">
			<div id="breadcrumb"><a href='../..\index.html'>Início</a> &#187; <a href='..\index.html'>Tutorials</a> &#187; <a href='index.html'>PHP</a> &#187; Lição 19: Inserindo dados em um Banco de Dados</div>
			<div id="socialBookmarks">
				<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal"></a>
				<span id="FbCont"></span>
				<g:plusone size="medium"></g:plusone>
								
			</div>
			<!-- google_ad_section_start -->
		
		<div id='tutorials'>	<h1>Lição 19: Inserindo dados em um Banco de Dados</h1> 

	<p>Nesta lição veremos como inserir dados em um Banco de Dados com uso de scripts PHP.</p> 

	<h2>Inserir dados com SQL</h2> 

	<p>Para inserir dados em um Banco de Dados com  SQL a sintaxe é idêntica a usada para criar Banco de Dados. A sintaxe é mostrada a seguir:</p> 

	<div class="codebox"> 
	<pre>

	<span class="code-php">INSERT INTO</span> nome_da_Tabela<span class="code-php">(coluna1, </span>coluna2, <span class="code-php">...) VALUES(valor1,</span> valor2, <span class="code-php">...)</span> 
	
	</pre>
	</div> 

	<p>Notar que podemos manipular dados em várias colunas ao mesmo tempo usando uma lista separada por vírgula no comando SQL. Mas, é óbvio, podemos manipular uma coluna somente. Colunas que não constam do comando SQL permanecem vazias.</p> 

	<h2>Exemplo: Inserir dados de uma pessoa na Tabela</h2> 

	<p>Neste exemplo usaremos o Banco de Dados criado na <a href="lesson18.html" title="Lição 18: Databases">lição 18</a>. Vamos inserir os dados de uma pessoa. Seja a pessoa <em>Gus Goose</em> cujo telefone é <em>99887766</em> e nasceu em <em>1964-04-20</em></p> 

	<p>O comando SQL para inserção é conforme mostrado a seguir:</p> 
	<div class="codebox"> 
	<pre>
	
	<span class="code-php">$strSQL = "INSERT INTO people(FirstName,LastName,Phone,BirthDate) VALUES('Gus','Goose','99887766 ','1964-04-20')";</span> <br />
	<span class="code-php">mysql_query($strSQL) or die(mysql_error());</span>
	
	</pre>
	</div> 

	<p>Notar que um comando SQL pode tornar-se extenso dificultando seu entendimento. Para esclarecer melhor e facilitar o entendimento existe uma sintaxe alternativa conforme mostrada a seguir:</p> 
	<div class="codebox"> 
	<pre>

	<span class="code-php">strSQL = "INSERT INTO people(";</span>

	<span class="code-php">strSQL = strSQL . "FirstName, ";</span>
	<span class="code-php">strSQL = strSQL . "LastName, "</span>
	<span class="code-php">strSQL = strSQL . "Phone, ";</span>
	<span class="code-php">strSQL = strSQL . "birth) ";</span>

	<span class="code-php">strSQL = strSQL . "VALUES (";</span>

	<span class="code-php">strSQL = strSQL . "'Gus', ";</span>
	<span class="code-php">strSQL = strSQL . "'Goose', ";</span>
	<span class="code-php">strSQL = strSQL . "'99887766', ";</span>

	<span class="code-php">strSQL = strSQL . "'1964-04-20')";</span>
	 
	<span class="code-php">mysql_query($strSQL) or die(mysql_error());</span>
	
	</pre> 
	</div> 

	<p>Segundo esta sintaxe, dividimos o comando em parte e usamos uma variável - no nosso caso <strong>$strSQL</strong> - para concatenar as partes em um comando único.</p> 

	<p>Na prática não importa a sintaxe que você usa. Dependendo do seu projeto escolha aquela que for mais conveniente para o claro entendimento dos comandos SQL.</p> 

	<p>Tente executar o seguinte código para inserir Gus Goose no Banco de Dados:</p> 
	<div class="codebox"> 
	<pre>

	&lt;html&gt;
	&lt;head&gt;
	&lt;title&gt;Inserindo dados em um Banco de Dados&lt;/title&gt;
	&lt;/head&gt;
	&lt;body&gt;
	<span class="code-php">&lt;?php</span>

	<span class="code-comments">// Conexão com o Banco de Dados</span>
	<span class="code-php">mysql_connect(&quot;mysql.myhost.com&quot;, &quot;user&quot;, &quot;sesame&quot;) or die (mysql_error ());</span>

	<span class="code-comments">// Seleciona o Banco de Dados</span>
	<span class="code-php">mysql_select_db(&quot;mydatabase&quot;) or die(mysql_error());</span>

	<span class="code-comments">// Comando SQL</span>

	<span class="code-php">$strSQL = "INSERT INTO people(";</span>

	<span class="code-php">$strSQL = $strSQL . "FirstName, ";</span>
	<span class="code-php">$strSQL = $strSQL . "LastName, ";</span>

	<span class="code-php">$strSQL = $strSQL . "Phone, ";</span>
	<span class="code-php">$strSQL = $strSQL . "BirthDate) ";</span>

	<span class="code-php">$strSQL = $strSQL . "VALUES(";</span>

	<span class="code-php">$strSQL = $strSQL . "'Gus', ";</span>

	<span class="code-php">$strSQL = $strSQL . "'Goose', ";</span>
	<span class="code-php">$strSQL = $strSQL . "'99887766', ";</span>

	<span class="code-php">$strSQL = $strSQL . "'1964-04-20')";</span>

	<span class="code-comments">// Comando SQL executado</span> 
	<span class="code-php">mysql_query($strSQL) or die (mysql_error());</span>

	<span class="code-comments">// Encerra conexão</span>
	<span class="code-php">mysql_close();</span>
	<span class="code-php">?&gt;</span>

	&lt;h1&gt;Banco de Dados atualizado!&lt;/h1&gt;
	&lt;/body&gt;
	&lt;/html&gt;
	
	</pre> 
	</div> 

	<h2>Inserir uma entrada de usuário no Banco de Dados</h2> 

	<p>Em certos casos há necessidade de inserir uma entrada de usuário no Banco de Dados.</p> 

	<p>Como você já deve ter concluído isto será feito com uso de um formulário como descrito na <a href="lesson11.html" title="Lição 11: Passando variáveis por formulário">lição 11</a> - pois podemos inserir o valor passado pelo formulário em um comando SQL. Suponha o formulário conforme mostrado a seguir:</p> 
	<div class="codebox"> 
	<pre>

	&lt;form action="insert.php" method="post"&gt;
	&lt;input type="text" name="FirstName" /&gt;
	&lt;input type="submit" value="Save" /&gt;

	&lt;/form&gt;
	
	</pre> 
	</div> 

	<p>O formulário será enviado para <strong>insert.php</strong> no qual, conforme mostrado na lição 11, extrairemos o valor entrado no formulário pelo usuário. Para este nosso exemplo o comando SQL é conforme mostrado a seguir:</p> 

	<div class="codebox"> 
	<pre>

	<span class="code-php">strSQL = "INSERT INTO people(FirstName) values('" . $_POST["FirstName"] . "')"</span>
	
	</pre> 
	</div> 

	<p>De maneira semelhante é possível extrair dados de cookies, sessions, query strings, etc.</p> 

	<h2>Erros mais comuns</h2> 

	<p>No início, você provavelmente será brindado com uma bateria de mensagens de erros quando tentar atualizar dados em um Banco de Dados. Não há lugar para o menor erro que seja, quando trabalhamos com Banco de Dados. O simples esquecimento ou má colocação de uma vírgula põe tudo a perder e lá vem uma mensagem de erro. Observe a seguir os erros mais comuns cometidos quando se está iniciando.</p> 

	<h3>Tipo de dado incorreto</h3> 

	<p>É importante manter consistência de tipo de dado na coluna. Cada coluna deve conter um determinado tipo de dado. A figura a seguir mostra os tipos de dados para a Tabela "people" do nosso exemplo.</p> 
	
	<p><img src="lesson19_img01.png" alt="Specifying data types"></p> 

	<p>Se você tentar inserir textos ou números em um mesmo campo que admite somente textos, vai ocorrer erro. Ou bem texto ou bem número. É importante definir o tipo de dados da forma mais precisa possível.</p> 

	<p>Observe, a seguir, uma lista dos tipos de dados:</p> 
	
	<table class="ts1"> 
	<tr> 
		<th class="ts1">Tipo de dado</th> 
		<th class="ts1">Definição</th> 
		<th class="ts1">Tamanho</th> 
	</tr> 
	<tr> 
		<td class="ts1td1">CHR<br /></td>
		<td class="ts1td1">Texto ou combinação de texto e número. Pode-se também ser empregado para números não usados em cálculos (por exemplo: número de telefone).</td>
		<td class="ts1td1">Até 255 caracteres - ou o comprimento definido em "Length"</td> 
	</tr> 
	<tr>
		<td class="ts1td2">TEXT<br /></td>
		<td class="ts1td2">Textos longos ou combinação de textos e números.</td>
		<td class="ts1td2">Até 65.535 caracteres.</td> 
	</tr> 
	<tr> 
		<td class="ts1td1">INT<br /></td>
		<td class="ts1td1">Dados numéricos para cálculos matemáticos.</td>
		<td class="ts1td1">4 bytes.</td> 
	</tr>
	<tr> 
		<td class="ts1td2">DATE<br /></td> 
		<td class="ts1td2">Datas no formato YYYY-MM-DD</td>
		<td class="ts1td2">3 bytes.</td> 
	</tr> 
	<tr> 
		<td class="ts1td2">TIME<br /></td> 
		<td class="ts1td2">Horas no formato hh:mm:ss</td>
		<td class="ts1td2">3 bytes.</td> 
	</tr>
	<tr> 
		<td class="ts1td2">DATETIME<br /></td> 
		<td class="ts1td2">Data/hora no formato YYYY-MM-DD hh:mm:ss</td>
		<td class="ts1td2">8 bytes.</td> 
	</tr>
	</table> 

	<h3>Comandos SQL com aspas e barras</h3> 

	<p>Se, em um comando SQL, você tentar inserir texto contendo aspas simples ('), aspas duplas (") ou barra invertida (\), o registro não será inserido. A solução é usar barra invertida (\) antes destes caracteres nos comandos SQL. </p> 

	<p>Isto pode ser feito com uso da função <a href="http://php.net/manual/en/function.addslashes.php" title="Documentation"> addslashes</a> como mostrado a seguir:</p> 
	<div class="codebox"> 
	<pre>

	<span class="code-php">&lt;?php</span>

	<span class="code-php">$strText = "Seu nome é O'Reilly?";</span>
	<span class="code-php">$strText = addslashes($strText);</span>

	<span class="code-php">?&gt;</span>
	
	</pre> 
	</div> 

	<p>Então, usando esta função todo caractere ('), (") e (\) será acrescido automaticamente de uma barra invertida (\) no seu início. Esta barra extra é necessária apenas para possibilitar a inserção do dado no Banco de Dados. É importante ressaltar que o PHP realiza <em>por padrão</em> o <a href="http://php.net/manual/en/function.addslashes.php" title="documentação"> addslashes</a> em todos os dados obtidos via $_GET, $_POST e $_COOKIE. Assim, não há necessidade de usar <a href="http://php.net/manual/en/function.addslashes.php" title="documentação"> addslashes</a> em strings que já tenham sido "escapadas" (com barra invertida).</p> 

	<p>Na próxima lição estudaremos como extrair dados de um Banco de Dados. Mas, antes de seguir tente inserir mis pessoas no Banco de Dados (tal como mostramos no exemplo para a pessoa Gus Goose).</p>

	<hr />
	<hr />
	<p class='previous'><a href='lesson18.html'>&lt;&lt; Lição 18: Criando Banco de Dados e suas Tabelas</a></p>
	<p class='next'><a href='lesson20.html'>Lição 20: Extraindo dados de um Banco de Dados >></a></p>
	</div>  		<!-- google_ad_section_end -->

		</div>

		
	</div>

	<div id="sidebar">
					<h1>Tutorials</h1>
			<ul>
			<li><a href='..\html\index.html'>HTML Tutorial</a></li><li><a href='..\css\index.html'>CSS Tutorial</a></li><li><strong><a href='index.html'>Tutorial PHP</a></strong><ul><li><a href='introduction.html'>Introdução</a></li><li><a href='lesson1.html'>O que é PHP</a></li><li><a href='lesson2.html'>Servidores</a></li><li><a href='lesson3.html'>Sua primeira página PHP</a></li><li><a href='lesson4.html'>Trabalhando com datas e horas</a></li><li><a href='lesson5.html'>Loops</a></li><li><a href='lesson6.html'>Condicionais</a></li><li><a href='lesson7.html'>Insira comentários nos seus scripts</a></li><li><a href='lesson8.html'>Arrays</a></li><li><a href='lesson9.html'>Funções</a></li><li><a href='lesson10.html'>Passando variáveis no URL</a></li><li><a href='lesson11.html'>Passando variáveis de um formulário</a></li><li><a href='lesson12.html'>Sessões</a></li><li><a href='lesson13.html'>Cookies</a></li><li><a href='lesson14.html'>Sistema de arquivos</a></li><li><a href='lesson15.html'>Ler arquivos de texto</a></li><li><a href='lesson16.html'>Escrever em arquivos de texto</a></li><li><a href='lesson17.html'>Banco de Dados</a></li><li><a href='lesson18.html'>Criando Banco de Dados e suas Tabelas</a></li><li class='selected'><a href='lesson19.html'>Inserindo dados em um Banco de Dados</a></li><li><a href='lesson20.html'>Extraindo dados de um Banco de Dados</a></li><li><a href='lesson21.html'>Apagando dados de um Banco de Dados</a></li><li><a href='lesson22.html'>Atualizando dados de um Banco de Dados</a></li></ul></li>			</ul>
			
		<!-- google_ad_section_start(weight=ignore) -->
		<h2>Idioma</h2>
		
		<form method="post" action="../..\redirect.html">
			<p>
			<select name="location">
				
				<option value='http://ar.html.net/tutorials/php/lesson19.php'>العربية</option>
				<option value='http://de.html.net/tutorials/php/lesson19.php'>Deutsch</option>
				<option value='http://html.net/tutorials/php/lesson19.php'>English</option>
				<option value='http://es.html.net/tutorials/php/lesson19.php'>Español</option>
				<option value='http://fr.html.net/tutorials/php/lesson19.php'>Français</option>
				<option value='http://he.html.net/tutorials/php/lesson19.php'>עברית</option>
				<option value='http://it.html.net/tutorials/php/lesson19.php'>Italiano</option>
				<option value='http://pl.html.net/tutorials/php/lesson19.php'>Polski</option>
				<option selected='selected' value='http://pt-br.html.net/tutorials/php/lesson19.php'>Português (Brasil)</option>
				<option value='http://ru.html.net/tutorials/php/lesson19.php'>Русский</option>
				<option value='http://zh.html.net/tutorials/php/lesson19.php'>中文</option>			</select>
			<input type="submit" value=">>" />
			</p>
		</form>
		
		
		<h2>Layout</h2>
		<form method='post' action='lesson19.html'>			<p>
			<select name="strCSS">
				
				<option value='1'>Default</option>
				<option value='2'>Default - Blue</option>
				<option value='3'>No CSS</option>			</select>
			<input type="submit" value=">>" />
			</p>
		</form>

		<h2>Traduzido por:</h2> <p><a href='http://www.maujor.com/'>Maurício Samy Silva</a></p>
		
			

		

	</div>

	<div id="footer">

		<hr />

		
		<h1>Quem está online:</h1>
		<p>No total, temos <strong>100</strong> usuários online :: 4 registrados, 0 ocultos e  96 visitantes</p> 
		<p>O recorde de usuários online foi de <strong>338</strong> em Ter Set 28, 2010 9:13 am</p> 
		<p id="userlist"><br />Usuários Registrados: <span style="color: #9E8DA7;" class="username-coloured">Google [Bot]</span>, <span style="color: #9E8DA7;" class="username-coloured">Google Adsense [Bot]</span>, <span style="color: #9E8DA7;" class="username-coloured">Majestic-12 [Bot]</span>, <span style="color: #9E8DA7;" class="username-coloured">Yahoo [Bot]</span></p>
		
		<h1>Estatísticas:</h1>
		<p>Total de Mensagens <strong>3330</strong> - Tópicos no Total: <strong>1407</strong></p><p>Membros no Total: <strong>4345</strong> - O mais novo usuário registrado: <strong><a href='../..\forums\memberlist.html'>jerseys4o5</a></strong></p>
		<p><br /><a href="../..\forums\memberlist.html">Ver lista completa de membros</a></p>
		

		<h1>Idioma:</h1>
		<p><span>
		<a href='http://ar.html.net/tutorials/php/lesson19.php'>العربية</a> | <a href='http://de.html.net/tutorials/php/lesson19.php'>Deutsch</a> | <a href='http://html.net/tutorials/php/lesson19.php'>English</a> | <a href='http://es.html.net/tutorials/php/lesson19.php'>Español</a> | <a href='http://fr.html.net/tutorials/php/lesson19.php'>Français</a> | <a href='http://he.html.net/tutorials/php/lesson19.php'>עברית</a> | <a href='http://it.html.net/tutorials/php/lesson19.php'>Italiano</a> | <a href='http://pl.html.net/tutorials/php/lesson19.php'>Polski</a> | Português (Brasil) | <a href='http://ru.html.net/tutorials/php/lesson19.php'>Русский</a> | <a href='http://zh.html.net/tutorials/php/lesson19.php'>中文</a> | 		</span></p>

		
	</div>
</body>
</html>
