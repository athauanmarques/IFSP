drop database if exists funcoes;
create database funcoes;
use funcoes;

DROP TABLE IF EXISTS curso;
CREATE TABLE curso (
  CODCURSO char(3) NOT NULL,
  NOME char(30) DEFAULT NULL,
  MENSALIDADE float DEFAULT NULL,
  PRIMARY KEY (CODCURSO)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


INSERT INTO curso VALUES ('AS','ANALISE DE SISTEMAS',1000);
INSERT INTO curso VALUES ('CC','CIENCIA DA COMPUTACAO',950);
INSERT INTO curso VALUES ('SI','SISTEMAS DE INFORMACAO',800);

DROP TABLE IF EXISTS disciplina;

CREATE TABLE disciplina (
  CodDisc char(5) NOT NULL,
  Nome char(30) DEFAULT NULL,
  CodCurso char(5) DEFAULT NULL,
  NroCreditos int(11) DEFAULT NULL,
  PRIMARY KEY (CodDisc),
  KEY CodCurso (CodCurso),
  CONSTRAINT disciplina_ibfk_1 FOREIGN KEY (CodCurso) REFERENCES curso (CODCURSO) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


INSERT INTO disciplina VALUES ('BD','BANCO DE DADOS','CC',4);
INSERT INTO disciplina VALUES ('BDA','BANCO DE DADOS AVANCADOS','CC',6);
INSERT INTO disciplina VALUES ('BDOO','BANCO DE DADOS O OBJETOS','SI',4);
INSERT INTO disciplina VALUES ('BDS','SISTEMAS DE BANCO DE DADOS','AS',4);
INSERT INTO disciplina VALUES ('DBD','DESENVOLVIMENTO BANCO DE DADOS','SI',6);
INSERT INTO disciplina VALUES ('IBD','INTRODUCAO A BANCO DE DADOS','AS',2);

DROP TABLE IF EXISTS aluno;
CREATE TABLE aluno (
  RA char(9) NOT NULL DEFAULT '',
  RG char(9) DEFAULT NULL,
  NOME char(30) DEFAULT NULL,
  CODCURSO char(3) DEFAULT NULL,
  renda decimal(6,2) DEFAULT NULL,
  PRIMARY KEY (RA),
  KEY CODCURSO (CODCURSO),
  CONSTRAINT aluno_ibfk_1 FOREIGN KEY (CODCURSO) REFERENCES curso (CODCURSO) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


INSERT INTO aluno VALUES ('123','12345','BIANCA MARIA PEDROSA','AS',697.91);
INSERT INTO aluno VALUES ('212','21234','TATIANE CITTON','AS',561.10);
INSERT INTO aluno VALUES ('221','22145','ALEXANDRE PEDROSA','CC',711.79);
INSERT INTO aluno VALUES ('231','23144','ALEXANDRE MONTEIRO','CC',875.63);
INSERT INTO aluno VALUES ('321','32111','MARCIA RIBEIRO','CC',242.79);
INSERT INTO aluno VALUES ('661','66123','JUSSARA MARANDOLA','SI',587.04);
INSERT INTO aluno VALUES ('765','76512','WALTER RODRIGUES','SI',206.85);

DROP TABLE IF EXISTS boletim;
CREATE TABLE boletim (
  Ra char(9) NOT NULL DEFAULT '',
  CodDisc char(5) NOT NULL DEFAULT '',
  nota1 decimal(6,2) DEFAULT NULL,
  nota2 decimal(6,2) DEFAULT NULL,
  media decimal(6,2) DEFAULT NULL,
  PRIMARY KEY (Ra,CodDisc),
  KEY CodDisc (CodDisc),
  CONSTRAINT boletim_ibfk_1 FOREIGN KEY (Ra) REFERENCES aluno (RA) ON DELETE CASCADE,
  CONSTRAINT boletim_ibfk_2 FOREIGN KEY (CodDisc) REFERENCES disciplina (CodDisc) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


INSERT INTO boletim VALUES ('123','BDS',0.63,8.58,3.81);
INSERT INTO boletim VALUES ('212','IBD',8.36,2.22,5.90);
INSERT INTO boletim VALUES ('231','BD',9.88,5.33,8.06);
INSERT INTO boletim VALUES ('231','BDA',4.32,9.98,6.58);
INSERT INTO boletim VALUES ('661','DBD',1.97,3.94,2.76);
INSERT INTO boletim VALUES ('765','DBD',6.90,9.76,8.04);



DELIMITER ;;
CREATE DEFINER=root@localhost FUNCTION hello(s CHAR(20)) RETURNS char(50) CHARSET utf8
RETURN CONCAT('Hello, ',s,'!') ;;
DELIMITER ;
DELIMITER ;;
CREATE DEFINER=root@localhost FUNCTION MEDIA(a float, b float) RETURNS float
return (a+b)/2 ;;
DELIMITER ;

DELIMITER ;;
CREATE DEFINER=root@localhost FUNCTION mediaponderada(a float, b float) RETURNS float
return (a*0.6)+(b*0.4) ;;
DELIMITER ;

